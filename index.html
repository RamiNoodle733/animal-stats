<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="The animal powerscaling database. Compare matchups, rank the roster, and run tournaments to see who comes out on top.">
    <meta name="keywords" content="animal stats, wildlife facts, animal comparison, nature education, animal abilities, scientific data">
    <meta name="author" content="Animal Stats">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="Animal Battle Stats">
    <meta property="og:description" content="The animal powerscaling database. Compare matchups, rank the roster, and run tournaments to see who comes out on top.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/images/og-image.png">
    <meta property="og:url" content="https://animal-battle-stats.vercel.app">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/images/og-image.png">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#ff0033">
    <meta name="msapplication-TileColor" content="#ff0033">
    
    <title>Animal Battle Stats</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="tournament-v4.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Bebas+Neue&family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Main Game Screen -->
    <div class="game-screen">
        <!-- Header -->
        <header class="game-header">
            <div class="header-brand">
                <img src="/images/logo.png" alt="Animal Battle Stats" class="header-logo" id="header-logo">
                <h1 id="main-title">ANIMAL BATTLE <span class="title-mode">STATS</span></h1>
            </div>
            <nav class="nav-tabs">
                <button class="mode-btn active" id="stats-mode-btn" data-mode="stats">
                    <i class="fas fa-chart-bar"></i> <span class="mode-text">STATS</span>
                </button>
                <button class="mode-btn" id="compare-mode-btn" data-mode="compare">
                    <i class="fas fa-balance-scale"></i> <span class="mode-text">COMPARE</span>
                </button>
                <button class="mode-btn" id="rankings-mode-btn" data-mode="rankings">
                    <i class="fas fa-trophy"></i> <span class="mode-text">RANKINGS</span>
                </button>
                <button class="mode-btn" id="community-mode-btn" data-mode="community">
                    <i class="fas fa-users"></i> <span class="mode-text">COMMUNITY</span>
                </button>
            </nav>
            
            <!-- Auth Area - Shows login button when logged out, stats bar when logged in -->
            <div class="auth-area" id="auth-area">
                <!-- Login Button (shown when logged out) -->
                <button class="auth-login-btn" id="auth-login-btn">
                    <i class="fas fa-user"></i> LOG IN
                </button>
                
                <!-- User Stats Bar (shown when logged in) -->
                <div class="user-stats-bar" id="user-stats-bar" style="display: none;">
                    <div class="user-profile-mini" id="user-profile-mini">
                        <div class="user-avatar-mini" id="user-avatar-mini">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="user-level-info">
                            <div class="user-name-level">
                                <span class="user-name-mini" id="user-name-mini">Username</span>
                                <span class="user-level-badge" id="user-level-badge">LV 1</span>
                            </div>
                            <div class="xp-bar-container">
                                <div class="xp-bar-fill" id="xp-bar-fill" style="width: 0%;"></div>
                                <span class="xp-bar-text" id="xp-bar-text">0 / 100 XP</span>
                            </div>
                        </div>
                        <!-- Profile Dropdown -->
                        <div class="profile-dropdown" id="profile-dropdown">
                            <a href="#" class="profile-dropdown-item" id="profile-btn"><i class="fas fa-id-card"></i> Profile</a>
                            <a href="#" class="profile-dropdown-item logout" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Log Out</a>
                        </div>
                    </div>
                    <div class="battle-points-display" id="battle-points-display">
                        <div class="bp-coin" id="bp-coin">
                            <span class="bp-icon">⚔</span>
                        </div>
                        <span class="bp-amount" id="bp-amount">0</span>
                        <span class="bp-label">BP</span>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Stats View (Character Select Style) -->
        <div id="stats-view" class="view-container active-view">
            <div class="character-display-area">
                <!-- Left Stats Panel -->
                <div class="stats-panel stats-panel-left">
                    <div class="stat-group" id="left-stats">
                        <!-- ATTACK GROUP -->
                        <div class="stat-group-container">
                            <div class="stat-row">
                                <div class="stat-icon"><i class="fas fa-fist-raised"></i></div>
                                <div class="stat-name">ATK</div>
                                <div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="stat-attack-bar" style="width: 0%; background: #ff6b00;"></div></div></div>
                                <div class="stat-value" id="stat-attack-val">0</div>
                            </div>
                            <div class="substat-container">
                                <div class="substat-row compact">
                                    <span class="substat-label">PWR</span>
                                    <span class="substat-value" id="sub-raw-power-val">0</span>
                                </div>
                                <div class="substat-row compact">
                                    <span class="substat-label">WPN</span>
                                    <span class="substat-value" id="sub-weaponry-val">0</span>
                                </div>
                            </div>
                        </div>

                        <!-- DEFENSE GROUP -->
                        <div class="stat-group-container">
                            <div class="stat-row">
                                <div class="stat-icon"><i class="fas fa-shield-alt"></i></div>
                                <div class="stat-name">DEF</div>
                                <div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="stat-defense-bar" style="width: 0%; background: #00d4ff;"></div></div></div>
                                <div class="stat-value" id="stat-defense-val">0</div>
                            </div>
                            <div class="substat-container">
                                <div class="substat-row compact">
                                    <span class="substat-label">PRT</span>
                                    <span class="substat-value" id="sub-protection-val">0</span>
                                </div>
                                <div class="substat-row compact">
                                    <span class="substat-label">TGH</span>
                                    <span class="substat-value" id="sub-toughness-val">0</span>
                                </div>
                            </div>
                        </div>

                        <!-- AGILITY GROUP -->
                        <div class="stat-group-container">
                            <div class="stat-row">
                                <div class="stat-icon"><i class="fas fa-wind"></i></div>
                                <div class="stat-name">AGI</div>
                                <div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="stat-agility-bar" style="width: 0%; background: #00ff88;"></div></div></div>
                                <div class="stat-value" id="stat-agility-val">0</div>
                            </div>
                            <div class="substat-container">
                                <div class="substat-row compact">
                                    <span class="substat-label">SPD</span>
                                    <span class="substat-value" id="sub-speed-val">0</span>
                                </div>
                                <div class="substat-row compact">
                                    <span class="substat-label">MNV</span>
                                    <span class="substat-value" id="sub-maneuverability-val">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Abilities Section (below left stats) -->
                    <div class="abilities-card">
                        <div class="card-header">
                            <i class="fas fa-bolt"></i> ABILITIES
                        </div>
                        <div class="abilities-list" id="abilities-list">
                            <div class="ability-item placeholder">Select an animal</div>
                        </div>
                    </div>
                </div>
                
                <!-- Center Character Display -->
                <div class="character-showcase">
                    <div class="character-name-display" id="character-name">SELECT AN ANIMAL</div>
                    <div class="character-scientific-name" id="character-scientific">---</div>
                    
                    <!-- Battle Record Badge -->
                    <div class="battle-record-badge" id="battle-record-badge">
                        <div class="record-item rank">
                            <i class="fas fa-crown"></i>
                            <span class="record-value" id="animal-rank">#--</span>
                            <span class="record-label">RANK</span>
                        </div>
                        <div class="record-divider"></div>
                        <div class="record-item battles">
                            <i class="fas fa-swords"></i>
                            <span class="record-value" id="animal-battles">0</span>
                            <span class="record-label">BATTLES</span>
                        </div>
                        <div class="record-divider"></div>
                        <div class="record-item winrate">
                            <i class="fas fa-trophy"></i>
                            <span class="record-value" id="animal-winrate">--%</span>
                            <span class="record-label">WIN %</span>
                        </div>
                    </div>
                    
                    <div class="character-model-container">
                        <div class="character-silhouette" id="character-silhouette">
                            <i class="fas fa-question"></i>
                        </div>
                        <img id="character-model" class="character-model" src="" alt="" style="display: none;">
                    </div>
                    
                    <!-- Compact Quick Info Bar -->
                    <div class="quick-info-bar" id="quick-info-bar">
                        <div class="quick-info-item clickable" id="weight-toggle" title="Click to switch kg/lbs">
                            <i class="fas fa-weight-hanging"></i>
                            <span id="quick-weight">---</span>
                            <i class="fas fa-sync-alt toggle-icon"></i>
                        </div>
                        <div class="quick-info-divider"></div>
                        <div class="quick-info-item clickable" id="speed-toggle" title="Click to switch km/h / mph">
                            <i class="fas fa-tachometer-alt"></i>
                            <span id="quick-speed">---</span>
                            <i class="fas fa-sync-alt toggle-icon"></i>
                        </div>
                        <div class="quick-info-divider"></div>
                        <div class="quick-info-item">
                            <i class="fas fa-tooth"></i>
                            <span id="quick-bite">---</span>
                        </div>
                    </div>
                </div>
                
                <!-- Right Stats Panel -->
                <div class="stats-panel stats-panel-right">
                    <div class="stat-group" id="right-stats">
                        <!-- STAMINA GROUP -->
                        <div class="stat-group-container">
                            <div class="stat-row">
                                <div class="stat-value" id="stat-stamina-val">0</div>
                                <div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="stat-stamina-bar" style="width: 0%; background: #ff3366;"></div></div></div>
                                <div class="stat-name">STA</div>
                                <div class="stat-icon"><i class="fas fa-heart"></i></div>
                            </div>
                            <div class="substat-container right-align">
                                <div class="substat-row compact">
                                    <span class="substat-value" id="sub-endurance-val">0</span>
                                    <span class="substat-label">END</span>
                                </div>
                                <div class="substat-row compact">
                                    <span class="substat-value" id="sub-recovery-val">0</span>
                                    <span class="substat-label">REC</span>
                                </div>
                            </div>
                        </div>

                        <!-- INTEL GROUP -->
                        <div class="stat-group-container">
                            <div class="stat-row">
                                <div class="stat-value" id="stat-intelligence-val">0</div>
                                <div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="stat-intelligence-bar" style="width: 0%; background: #9966ff;"></div></div></div>
                                <div class="stat-name">INT</div>
                                <div class="stat-icon"><i class="fas fa-brain"></i></div>
                            </div>
                            <div class="substat-container right-align">
                                <div class="substat-row compact">
                                    <span class="substat-value" id="sub-tactics-val">0</span>
                                    <span class="substat-label">TAC</span>
                                </div>
                                <div class="substat-row compact">
                                    <span class="substat-value" id="sub-senses-val">0</span>
                                    <span class="substat-label">SNS</span>
                                </div>
                            </div>
                        </div>

                        <!-- SPECIAL GROUP -->
                        <div class="stat-group-container">
                            <div class="stat-row">
                                <div class="stat-value" id="stat-special-val">0</div>
                                <div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="stat-special-bar" style="width: 0%; background: #ffcc00;"></div></div></div>
                                <div class="stat-name">SPL</div>
                                <div class="stat-icon"><i class="fas fa-bolt"></i></div>
                            </div>
                            <div class="substat-container right-align">
                                <div class="substat-row compact">
                                    <span class="substat-value" id="sub-ferocity-val">0</span>
                                    <span class="substat-label">FRC</span>
                                </div>
                                <div class="substat-row compact">
                                    <span class="substat-value" id="sub-abilities-val">0</span>
                                    <span class="substat-label">ABL</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Traits Section (below right stats) -->
                    <div class="traits-card">
                        <div class="card-header">
                            <i class="fas fa-star"></i> TRAITS
                        </div>
                        <div class="traits-list" id="traits-list">
                            <div class="trait-item placeholder">Select an animal</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Compact Bottom Info Bar -->
            <div class="bottom-info-bar">
                <button class="toggle-grid-btn" id="toggle-grid-btn">
                    <i class="fas fa-chevron-down"></i> HIDE MENU
                </button>
                <div class="info-separator" id="toggle-separator">•</div>
                <button class="stats-comments-btn" id="stats-comments-btn" disabled>
                    <i class="fas fa-comment"></i> COMMENTS <span class="stats-comment-count" id="stats-comment-count">0</span>
                </button>
                <div class="info-separator">•</div>
                <button class="expand-details-btn" id="expand-details-btn">
                    <i class="fas fa-info-circle"></i> MORE DETAILS
                </button>
            </div>
            
            <!-- Expandable Details Panel -->
            <div class="details-panel" id="details-panel">
                <!-- Close button for mobile -->
                <div class="details-close-btn">
                    <button id="close-details-btn"><i class="fas fa-times"></i> CLOSE DETAILS</button>
                </div>
                <div class="details-grid">
                    <div class="details-column">
                        <div class="detail-section">
                            <h3><i class="fas fa-paw"></i> CLASSIFICATION</h3>
                            <div class="detail-item"><strong>Type:</strong> <span id="detail-type">---</span></div>
                            <div class="detail-item"><strong>Scientific:</strong> <span id="detail-scientific">---</span></div>
                            <div class="detail-item"><strong>Size Category:</strong> <span id="detail-size">---</span></div>
                        </div>
                        <div class="detail-section">
                            <h3><i class="fas fa-crosshairs"></i> BATTLE PROFILE</h3>
                            <div class="detail-item"><strong>Combat Style:</strong> <span id="detail-combat-style">---</span></div>
                            <div class="detail-item"><strong>Preferred Range:</strong> <span id="detail-range">---</span></div>
                            <div class="detail-item"><strong>Strengths:</strong> <span id="detail-strengths">---</span></div>
                            <div class="detail-item"><strong>Weaknesses:</strong> <span id="detail-weaknesses">---</span></div>
                        </div>
                        <div class="detail-section">
                            <h3><i class="fas fa-map-marked-alt"></i> HABITAT & DIET</h3>
                            <div class="detail-item"><strong>Habitat:</strong> <span id="detail-habitat">---</span></div>
                            <div class="detail-item"><strong>Diet:</strong> <span id="detail-diet">---</span></div>
                            <div class="detail-item"><strong>Nocturnal:</strong> <span id="detail-nocturnal">---</span></div>
                            <div class="detail-item"><strong>Social:</strong> <span id="detail-social">---</span></div>
                        </div>
                    </div>
                    <div class="details-column">
                        <div class="detail-section full-height">
                            <h3><i class="fas fa-ruler-combined"></i> PHYSICAL MEASUREMENTS</h3>
                            <div class="detail-item"><strong>Weight:</strong> <span id="detail-weight">---</span></div>
                            <div class="detail-item"><strong>Height:</strong> <span id="detail-height">---</span></div>
                            <div class="detail-item"><strong>Length:</strong> <span id="detail-length">---</span></div>
                            <div class="detail-item"><strong>Speed:</strong> <span id="detail-speed">---</span></div>
                            <div class="detail-item"><strong>Lifespan:</strong> <span id="detail-lifespan">---</span></div>
                            <div class="detail-item"><strong>Bite Force:</strong> <span id="detail-bite">---</span></div>
                            <div class="detail-item"><strong>Size Score:</strong> <span id="detail-size-score">---</span></div>
                        </div>
                    </div>
                    <div class="details-column">
                        <div class="detail-section full-height">
                            <h3><i class="fas fa-info-circle"></i> DESCRIPTION</h3>
                            <p id="animal-description">Select an animal to view description</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Compare View (Fight Screen Style) -->
        <div id="compare-view" class="view-container">
            <div class="fight-screen">
                <div class="fighter-section fighter-left">
                    <div class="fighter-display">
                        <div class="fighter-placeholder" id="animal-1-placeholder">
                            <i class="fas fa-paw"></i>
                            <p>SELECT<br>ANIMAL 1</p>
                        </div>
                        <img id="animal-1-image" class="fighter-image" src="" alt="" style="display: none;">
                        <div class="fighter-info-overlay">
                            <div class="fighter-name" id="animal-1-name">???</div>
                            <button class="view-stats-btn" id="view-stats-1">VIEW STATS</button>
                        </div>
                    </div>
                    <!-- Stats Panel for Fighter 1 -->
                    <div class="compare-stats-panel" id="compare-stats-1" style="display: none;">
                        <div class="compare-stat-row">
                            <i class="fas fa-fist-raised"></i>
                            <span class="compare-stat-label">ATTACK</span>
                            <span class="compare-stat-value" id="compare-attack-1">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-shield-alt"></i>
                            <span class="compare-stat-label">DEFENSE</span>
                            <span class="compare-stat-value" id="compare-defense-1">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-running"></i>
                            <span class="compare-stat-label">AGILITY</span>
                            <span class="compare-stat-value" id="compare-agility-1">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-heart"></i>
                            <span class="compare-stat-label">STAMINA</span>
                            <span class="compare-stat-value" id="compare-stamina-1">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-brain"></i>
                            <span class="compare-stat-label">INTELLIGENCE</span>
                            <span class="compare-stat-value" id="compare-intelligence-1">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-bolt"></i>
                            <span class="compare-stat-label">SPECIAL</span>
                            <span class="compare-stat-value" id="compare-special-1">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="fight-center">
                    <div class="radar-chart-container">
                        <canvas id="comparison-radar"></canvas>
                    </div>
                </div>
                
                <div class="fighter-section fighter-right">
                    <div class="fighter-display">
                        <div class="fighter-placeholder" id="animal-2-placeholder">
                            <i class="fas fa-paw"></i>
                            <p>SELECT<br>ANIMAL 2</p>
                        </div>
                        <img id="animal-2-image" class="fighter-image" src="" alt="" style="display: none;">
                        <div class="fighter-info-overlay">
                            <div class="fighter-name" id="animal-2-name">???</div>
                            <button class="view-stats-btn" id="view-stats-2">VIEW STATS</button>
                        </div>
                    </div>
                    <!-- Stats Panel for Fighter 2 -->
                    <div class="compare-stats-panel" id="compare-stats-2" style="display: none;">
                        <div class="compare-stat-row">
                            <i class="fas fa-fist-raised"></i>
                            <span class="compare-stat-label">ATTACK</span>
                            <span class="compare-stat-value" id="compare-attack-2">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-shield-alt"></i>
                            <span class="compare-stat-label">DEFENSE</span>
                            <span class="compare-stat-value" id="compare-defense-2">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-running"></i>
                            <span class="compare-stat-label">AGILITY</span>
                            <span class="compare-stat-value" id="compare-agility-2">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-heart"></i>
                            <span class="compare-stat-label">STAMINA</span>
                            <span class="compare-stat-value" id="compare-stamina-2">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-brain"></i>
                            <span class="compare-stat-label">INTELLIGENCE</span>
                            <span class="compare-stat-value" id="compare-intelligence-2">0</span>
                        </div>
                        <div class="compare-stat-row">
                            <i class="fas fa-bolt"></i>
                            <span class="compare-stat-label">SPECIAL</span>
                            <span class="compare-stat-value" id="compare-special-2">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Compare Controls Bar -->
            <div class="bottom-info-bar compare-controls-bar">
                <button class="toggle-grid-btn" id="compare-toggle-grid-btn">
                    <i class="fas fa-chevron-down"></i> HIDE MENU
                </button>
                <button class="fight-btn" id="fight-btn">
                    <i class="fas fa-bolt"></i> FIGHT <i class="fas fa-bolt"></i>
                </button>
                <div style="width: 140px;"></div> <!-- Spacer to balance layout -->
            </div>
        </div>
        
        <!-- Rankings View (Power Leaderboard) -->
        <div id="rankings-view" class="view-container">
            <div class="rankings-console">
                <!-- Tournament Hero Banner - Persona/Comic Panel Style -->
                <div class="rankings-hero-banner" id="rankings-hero-banner">
                    <div class="hero-bg-glow"></div>
                    <div class="hero-bg-pulse"></div>
                    <div class="hero-bg-lines"></div>
                    <div class="hero-light-sweep"></div>
                    <div class="hero-accent-bar left"></div>
                    <div class="hero-accent-bar right"></div>
                    <div class="hero-content-centered">
                        <div class="hero-top-row">
                            <div class="hero-trophy-badge">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <span class="hero-title">ANIMAL BATTLE TOURNAMENT</span>
                            <div class="hero-trophy-badge mirror">
                                <i class="fas fa-trophy"></i>
                            </div>
                        </div>
                        <button class="hero-play-btn-big" id="hero-tournament-btn">
                            <span class="btn-pulse-ring"></span>
                            <span class="btn-light-sweep"></span>
                            <span class="btn-inner">
                                <i class="fas fa-play"></i>
                                <span>PLAY NOW</span>
                            </span>
                        </button>
                        <span class="hero-subtitle">Vote head-to-head in rapid matchups to shape the Power Rankings</span>
                    </div>
                </div>
                
                <!-- Two Column Layout -->
                <div class="rankings-main-content">
                    <!-- Left Column: Rankings List with integrated header -->
                    <div class="rankings-list-column">
                        <!-- Compact inline title & search -->
                        <div class="rankings-list-toolbar">
                            <div class="rankings-list-title">
                                <i class="fas fa-crown"></i>
                                <span>Power Rankings</span>
                            </div>
                            <div class="rankings-login-prompt" id="rankings-login-prompt" style="display: none;">
                                <i class="fas fa-info-circle"></i> Log in to vote
                            </div>
                        </div>
                        <div class="rankings-list-header">
                            <span class="list-header-rank">Rank</span>
                            <span class="list-header-animal">Animal</span>
                            <span class="list-header-stats">Win Rate</span>
                            <span class="list-header-votes">Votes</span>
                            <div class="rankings-search-wrapper header-search">
                                <i class="fas fa-search"></i>
                                <input type="text" id="rankings-search" placeholder="Search..." class="rankings-search-inline" autocomplete="off">
                            </div>
                        </div>
                        <div class="rankings-list" id="rankings-list">
                            <div class="rankings-loading">
                                <i class="fas fa-spinner fa-spin"></i> Loading rankings...
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Column: Selected Animal Detail Panel -->
                    <div class="rankings-right-column">
                        <!-- Selected Animal Panel -->
                        <div class="rankings-detail-panel" id="rankings-detail-panel">
                            <div class="detail-panel-empty" id="detail-panel-empty">
                                <i class="fas fa-mouse-pointer"></i>
                                <p>Select an animal to view details</p>
                            </div>
                            <div class="detail-panel-content" id="detail-panel-content" style="display: none;">
                                <!-- Compact Header -->
                                <div class="detail-header-compact">
                                    <img src="" alt="" class="detail-portrait-sm" id="rankings-detail-portrait">
                                    <div class="detail-identity">
                                        <div class="detail-rank-badge" id="rankings-detail-rank">#1</div>
                                        <h3 class="detail-animal-name" id="rankings-detail-name">Animal Name</h3>
                                        <span class="detail-scientific" id="rankings-detail-scientific">---</span>
                                    </div>
                                    <div class="detail-grade-badge" id="rankings-detail-grade">S</div>
                                </div>
                                
                                <!-- Stats in 2 rows of 3 -->
                                <div class="detail-stats-compact">
                                    <div class="stat-mini" data-stat="attack">
                                        <i class="fas fa-fist-raised"></i>
                                        <span class="stat-val" id="detail-atk-val">0</span>
                                    </div>
                                    <div class="stat-mini" data-stat="defense">
                                        <i class="fas fa-shield-alt"></i>
                                        <span class="stat-val" id="detail-def-val">0</span>
                                    </div>
                                    <div class="stat-mini" data-stat="agility">
                                        <i class="fas fa-wind"></i>
                                        <span class="stat-val" id="detail-agi-val">0</span>
                                    </div>
                                    <div class="stat-mini" data-stat="stamina">
                                        <i class="fas fa-heart"></i>
                                        <span class="stat-val" id="detail-sta-val">0</span>
                                    </div>
                                    <div class="stat-mini" data-stat="intelligence">
                                        <i class="fas fa-brain"></i>
                                        <span class="stat-val" id="detail-int-val">0</span>
                                    </div>
                                    <div class="stat-mini" data-stat="special">
                                        <i class="fas fa-bolt"></i>
                                        <span class="stat-val" id="detail-spe-val">0</span>
                                    </div>
                                </div>
                                
                                <!-- Physical Stats Row -->
                                <div class="detail-physical-row">
                                    <div class="physical-stat">
                                        <i class="fas fa-weight-hanging"></i>
                                        <span id="rankings-detail-weight">---</span>
                                    </div>
                                    <div class="physical-stat">
                                        <i class="fas fa-tachometer-alt"></i>
                                        <span id="rankings-detail-speed">---</span>
                                    </div>
                                    <div class="physical-stat">
                                        <i class="fas fa-tooth"></i>
                                        <span id="rankings-detail-bite">---</span>
                                    </div>
                                </div>
                                
                                <!-- Abilities & Traits -->
                                <div class="detail-abilities-section">
                                    <div class="detail-abilities-row">
                                        <span class="abilities-label"><i class="fas fa-bolt"></i> ABILITIES</span>
                                        <div class="abilities-tags-compact" id="rankings-detail-abilities">
                                            <span class="ability-tag-sm">---</span>
                                        </div>
                                    </div>
                                    <div class="detail-traits-row">
                                        <span class="traits-label"><i class="fas fa-star"></i> TRAITS</span>
                                        <div class="traits-tags-compact" id="rankings-detail-traits">
                                            <span class="trait-tag-sm">---</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Battle stats row -->
                                <div class="detail-battle-row">
                                    <div class="battle-metric">
                                        <span class="metric-value" id="detail-winrate">--</span>
                                        <span class="metric-label">Win Rate</span>
                                    </div>
                                    <div class="battle-metric">
                                        <span class="metric-value" id="detail-battles">0</span>
                                        <span class="metric-label">Battles</span>
                                    </div>
                                    <div class="battle-metric">
                                        <span class="metric-value" id="detail-score">0</span>
                                        <span class="metric-label">Net Score</span>
                                    </div>
                                </div>
                                
                                <!-- Tournament History - Persona-style Mini Dashboard -->
                                <div class="detail-tournament-dashboard" id="detail-tournament-history">
                                    <div class="dashboard-header">
                                        <div class="dashboard-accent-left"></div>
                                        <span class="dashboard-title"><i class="fas fa-trophy"></i> TOURNAMENT RECORD</span>
                                        <div class="dashboard-accent-right"></div>
                                    </div>
                                    <div class="dashboard-content" id="tournament-history-content">
                                        <div class="medal-row">
                                            <div class="medal-card gold">
                                                <div class="medal-icon-wrap">
                                                    <i class="fas fa-trophy"></i>
                                                </div>
                                                <div class="medal-info">
                                                    <span class="medal-count" id="detail-gold-count">0</span>
                                                    <span class="medal-label">1ST</span>
                                                </div>
                                            </div>
                                            <div class="medal-card silver">
                                                <div class="medal-icon-wrap">
                                                    <i class="fas fa-medal"></i>
                                                </div>
                                                <div class="medal-info">
                                                    <span class="medal-count" id="detail-silver-count">0</span>
                                                    <span class="medal-label">2ND</span>
                                                </div>
                                            </div>
                                            <div class="medal-card bronze">
                                                <div class="medal-icon-wrap">
                                                    <i class="fas fa-medal"></i>
                                                </div>
                                                <div class="medal-info">
                                                    <span class="medal-count" id="detail-bronze-count">0</span>
                                                    <span class="medal-label">3RD</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dashboard-total" id="detail-tournaments-played">
                                            <span class="total-icon"><i class="fas fa-gamepad"></i></span>
                                            <span class="total-count">0</span>
                                            <span class="total-label">EVENTS ENTERED</span>
                                        </div>
                                    </div>
                                    <div class="dashboard-empty" id="tournament-history-empty" style="display: none;">
                                        <i class="fas fa-hourglass-start"></i>
                                        <span>No tournament history yet</span>
                                    </div>
                                </div>
                                
                                <!-- Vote & Actions Row -->
                                <div class="detail-actions-row">
                                    <div class="vote-btns">
                                        <button class="vote-btn up" id="detail-upvote" title="Underrated">
                                            <i class="fas fa-arrow-up"></i>
                                            <span id="detail-upvotes">0</span>
                                        </button>
                                        <button class="vote-btn down" id="detail-downvote" title="Overrated">
                                            <i class="fas fa-arrow-down"></i>
                                            <span id="detail-downvotes">0</span>
                                        </button>
                                    </div>
                                    <button class="action-btn-sm" id="detail-view-stats">
                                        <i class="fas fa-chart-bar"></i> Stats
                                    </button>
                                    <button class="action-btn-sm" id="detail-view-all-comments">
                                        <i class="fas fa-comments"></i> Comments
                                    </button>
                                    <button class="action-btn-sm details-btn" id="detail-more-details">
                                        <i class="fas fa-info-circle"></i> Details
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Community View -->
        <div id="community-view" class="view-container">
            <div class="community-container">
                <!-- Left/Center Column: Features -->
                <div class="community-main-column">
                    <!-- ========================================
                         DAILY MATCHUP - Top Section
                         ======================================== -->
                    <div class="daily-matchup-section" id="daily-matchup-section">
                        <div class="daily-matchup-header">
                            <div class="daily-matchup-badge">
                                <i class="fas fa-fire"></i> DAILY MATCHUP
                            </div>
                            <div class="daily-matchup-timer" id="daily-matchup-timer">
                                <i class="fas fa-clock"></i> Resets in <span id="matchup-countdown">--:--:--</span>
                            </div>
                        </div>
                        
                        <div class="daily-matchup-arena">
                            <div class="matchup-fighter" id="fighter-1">
                                <div class="fighter-image-container">
                                    <img src="" alt="" class="fighter-image" id="fighter-1-image">
                                </div>
                                <div class="fighter-name" id="fighter-1-name">Loading...</div>
                                <div class="fighter-stats" id="fighter-1-stats"></div>
                                <button class="vote-fighter-btn" id="vote-fighter-1" data-fighter="1">
                                    <i class="fas fa-crown"></i> VOTE TO WIN
                                </button>
                                <div class="fighter-votes">
                                    <div class="vote-bar" id="fighter-1-bar" style="width: 50%;"></div>
                                    <span class="vote-percent" id="fighter-1-percent">50%</span>
                                </div>
                            </div>
                            
                            <div class="matchup-vs">
                                <span>VS</span>
                            </div>
                            
                            <div class="matchup-fighter" id="fighter-2">
                                <div class="fighter-image-container">
                                    <img src="" alt="" class="fighter-image" id="fighter-2-image">
                                </div>
                                <div class="fighter-name" id="fighter-2-name">Loading...</div>
                                <div class="fighter-stats" id="fighter-2-stats"></div>
                                <button class="vote-fighter-btn" id="vote-fighter-2" data-fighter="2">
                                    <i class="fas fa-crown"></i> VOTE TO WIN
                                </button>
                                <div class="fighter-votes">
                                    <div class="vote-bar" id="fighter-2-bar" style="width: 50%;"></div>
                                    <span class="vote-percent" id="fighter-2-percent">50%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="matchup-comments-preview" id="matchup-comments-preview">
                            <div class="matchup-comments-header">
                                <i class="fas fa-comments"></i> Discussion
                                <span class="matchup-comments-count" id="matchup-comments-count">0</span>
                            </div>
                            <div class="matchup-comments-list" id="matchup-comments-list">
                                <!-- Comments loaded by JS -->
                            </div>
                            <div class="matchup-comment-input" id="matchup-comment-input-container">
                                <input type="text" id="matchup-comment-input" placeholder="Share your take..." maxlength="300" autocomplete="off" data-lpignore="true" data-1p-ignore="true" data-form-type="other" name="matchup-comment-field">
                                <button id="matchup-comment-send"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- ========================================
                         POWER RANKINGS PREVIEW
                         ======================================== -->
                    <div class="rankings-preview-section">
                        <div class="section-header">
                            <h3><i class="fas fa-crown"></i> Power Rankings</h3>
                            <button class="view-all-btn" id="view-full-rankings">
                                View All <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        <div class="rankings-preview-list" id="rankings-preview-list">
                            <!-- Top 5 rankings loaded by JS -->
                            <div class="rankings-loading">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </div>

                    <!-- ========================================
                         TOURNAMENTS BLOCK
                         ======================================== -->
                    <div class="tournaments-section">
                        <div class="section-header">
                            <h3><i class="fas fa-trophy"></i> Tournaments</h3>
                        </div>
                        <div class="tournament-content" id="tournament-content">
                            <div class="tournament-start-options">
                                <p class="tournament-prompt">Compete animals in bracket-style tournaments!</p>
                                <div class="bracket-size-options">
                                    <button class="bracket-size-btn" data-size="8">
                                        <span class="size-number">8</span>
                                        <span class="size-label">Quick</span>
                                    </button>
                                    <button class="bracket-size-btn" data-size="16">
                                        <span class="size-number">16</span>
                                        <span class="size-label">Standard</span>
                                    </button>
                                    <button class="bracket-size-btn" data-size="32">
                                        <span class="size-number">32</span>
                                        <span class="size-label">Epic</span>
                                    </button>
                                </div>
                            </div>
                            <!-- Active tournament shown here when in progress -->
                            <div class="active-tournament-card" id="active-tournament-card" style="display: none;">
                                <div class="active-tournament-info">
                                    <span class="tournament-round" id="tournament-round">Quarter Finals</span>
                                    <span class="tournament-progress" id="tournament-progress">Match 2 of 4</span>
                                </div>
                                <button class="continue-tournament-btn" id="continue-tournament-btn">
                                    <i class="fas fa-play"></i> Continue Tournament
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Chat & Comments -->
                <div class="community-chat-column">
                    <div class="community-chat-section">
                        <div class="community-tabs">
                            <button class="community-tab active" data-tab="chat">
                                <i class="fas fa-comments"></i> General Chat
                            </button>
                            <button class="community-tab" data-tab="feed">
                                <i class="fas fa-stream"></i> All Comments
                            </button>
                        </div>
                        
                        <!-- Chat Section -->
                        <div class="community-section active" id="community-chat-section">
                            <div class="chat-container">
                                <div class="chat-messages" id="chat-messages">
                                    <div class="chat-loading">
                                        <i class="fas fa-spinner fa-spin"></i> Loading messages...
                                    </div>
                                </div>
                                <div class="chat-input-container" id="chat-input-container">
                                    <div class="chat-input-wrapper" id="chat-input-wrapper" style="display: none;">
                                        <input type="text" id="chat-input" placeholder="Type a message..." maxlength="500" autocomplete="off">
                                        <button id="chat-send-btn" class="chat-send-btn">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Comments Feed Section -->
                        <div class="community-section" id="community-feed-section">
                            <div class="feed-container">
                                <div class="feed-list" id="feed-list">
                                    <div class="feed-loading">
                                        <i class="fas fa-spinner fa-spin"></i> Loading comments...
                                    </div>
                                </div>
                                <button class="load-more-btn" id="feed-load-more" style="display: none;">
                                    <i class="fas fa-chevron-down"></i> Load More Comments
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Login Prompt (shown when needed) -->
                    <div class="community-login-prompt" id="community-login-prompt" style="display: none;">
                        <i class="fas fa-info-circle"></i> <span>Log in to vote, chat and earn XP!</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Floating Show Menu Button removed - toggle button in bottom bar handles this -->
        
        <!-- Animal Grid (Bottom) -->
        <div class="character-grid-container">
            <div class="grid-controls">
                <input type="search" id="search-input" placeholder="Search animals..." class="search-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-form-type="other" data-lpignore="true" data-1p-ignore="true" aria-autocomplete="none">
                
                <!-- Filter Dropdown -->
                <div class="dropdown-menu-container">
                    <button class="dropdown-toggle-btn" id="filter-toggle">
                        <i class="fas fa-filter"></i> FILTER <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </button>
                    <div class="dropdown-panel filter-panel-compact" id="filter-panel">
                        <!-- Category Tabs -->
                        <div class="filter-category-tabs">
                            <button class="filter-tab active" data-category="class">Class</button>
                            <button class="filter-tab" data-category="diet">Diet</button>
                            <button class="filter-tab" data-category="biome">Biome</button>
                        </div>
                        
                        <!-- Category Content -->
                        <div class="filter-category-content">
                            <div class="filter-category active" id="filter-category-class">
                                <div class="checkbox-group" id="class-checkboxes">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                            <div class="filter-category" id="filter-category-diet">
                                <div class="checkbox-group">
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Carnivore" data-filter="diet"> 
                                        <span>Carnivore</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Herbivore" data-filter="diet"> 
                                        <span>Herbivore</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Omnivore" data-filter="diet"> 
                                        <span>Omnivore</span>
                                    </label>
                                </div>
                            </div>
                            <div class="filter-category" id="filter-category-biome">
                                <div class="checkbox-group">
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Savanna" data-filter="biome"> 
                                        <span>Savanna</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Forest" data-filter="biome"> 
                                        <span>Forest</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Ocean" data-filter="biome"> 
                                        <span>Ocean</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Desert" data-filter="biome"> 
                                        <span>Desert</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Jungle" data-filter="biome"> 
                                        <span>Jungle</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Arctic" data-filter="biome"> 
                                        <span>Arctic</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="River" data-filter="biome"> 
                                        <span>River</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Grassland" data-filter="biome"> 
                                        <span>Grassland</span>
                                    </label>
                                    <label class="checkbox-option">
                                        <input type="checkbox" value="Mountain" data-filter="biome"> 
                                        <span>Mountain</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <button class="clear-filters-btn" id="clear-filters">
                            <i class="fas fa-times"></i> Clear All
                        </button>
                        
                        <!-- Hidden selects for backwards compatibility -->
                        <select id="class-filter" class="filter-select" style="display: none;">
                            <option value="all">All Classes</option>
                        </select>
                        <select id="diet-filter" class="filter-select" style="display: none;">
                            <option value="all">All Diets</option>
                        </select>
                        <select id="biome-filter" class="filter-select" style="display: none;">
                            <option value="all">All Biomes</option>
                        </select>
                    </div>
                </div>
                
                <!-- Sort Dropdown -->
                <div class="dropdown-menu-container">
                    <button class="dropdown-toggle-btn" id="sort-toggle">
                        <i class="fas fa-sort"></i> SORT <i class="fas fa-chevron-down dropdown-arrow"></i>
                    </button>
                    <div class="dropdown-panel" id="sort-panel">
                        <div class="sort-options">
                            <label class="sort-option">
                                <input type="radio" name="sort" value="rank" id="sort-rank"> 
                                <span><i class="fas fa-calculator"></i> Stat Rank</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="community" id="sort-community"> 
                                <span><i class="fas fa-heart"></i> Community Favorites</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="name" id="sort-name"> 
                                <span><i class="fas fa-font"></i> Name (A-Z)</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="attack" id="sort-attack"> 
                                <span><i class="fas fa-fist-raised"></i> Attack</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="defense" id="sort-defense"> 
                                <span><i class="fas fa-shield-alt"></i> Defense</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="agility" id="sort-agility"> 
                                <span><i class="fas fa-wind"></i> Agility</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="stamina" id="sort-stamina"> 
                                <span><i class="fas fa-heart"></i> Stamina</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="intelligence" id="sort-intelligence"> 
                                <span><i class="fas fa-brain"></i> Intelligence</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="special" id="sort-special"> 
                                <span><i class="fas fa-bolt"></i> Special</span>
                            </label>
                            <label class="sort-option">
                                <input type="radio" name="sort" value="total" id="sort-total"> 
                                <span><i class="fas fa-calculator"></i> Total Stats</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Active Filters Badge (hidden select for backwards compatibility) -->
                <select id="sort-by" class="filter-select" style="display: none;">
                    <option value="rank">Sort by Rank</option>
                    <option value="name">Sort by Name</option>
                    <option value="attack">Sort by Attack</option>
                    <option value="defense">Sort by Defense</option>
                    <option value="agility">Sort by Agility</option>
                    <option value="stamina">Sort by Stamina</option>
                    <option value="intelligence">Sort by Intelligence</option>
                    <option value="special">Sort by Special</option>
                    <option value="total">Sort by Total Stats</option>
                </select>
                
                <span class="active-filters-badge" id="active-filters-badge">
                    <span id="filter-count">0</span> FILTERS
                </span>
            </div>
            
            <!-- Card Row with Arrows -->
            <div class="grid-row-wrapper">
                <!-- Left Arrow Button -->
                <button class="grid-arrow grid-arrow-left" id="grid-arrow-left" aria-label="Scroll left">
                    <i class="fas fa-chevron-left"></i>
                </button>
                
                <!-- Left Fade Mask -->
                <div class="grid-fade-mask grid-fade-left"></div>
                
                <!-- Card Container -->
                <div class="character-grid" id="character-grid"></div>
                
                <!-- Right Fade Mask -->
                <div class="grid-fade-mask grid-fade-right"></div>
                
                <!-- Right Arrow Button -->
                <button class="grid-arrow grid-arrow-right" id="grid-arrow-right" aria-label="Scroll right">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <!-- Custom Scrollbar -->
            <div class="grid-scrollbar-container" id="grid-scrollbar-container">
                <div class="grid-scrollbar-track">
                    <div class="grid-scrollbar-thumb" id="grid-scrollbar-thumb"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="auth-modal" id="auth-modal">
        <div class="auth-modal-content">
            <button class="auth-modal-close" id="auth-modal-close">&times;</button>
            
            <!-- Login Form -->
            <div class="auth-form" id="login-form">
                <h2><i class="fas fa-sign-in-alt"></i> LOG IN</h2>
                <div class="auth-error" id="login-error"></div>
                <div class="form-group">
                    <label for="login-email"><i class="fas fa-envelope"></i> Email or Username</label>
                    <input type="text" id="login-email" placeholder="Enter email or username" autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="login-password"><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="login-password" placeholder="Enter password" autocomplete="current-password">
                </div>
                <button class="auth-submit-btn" id="login-submit">
                    <span class="btn-text">LOG IN</span>
                    <span class="btn-loader" style="display: none;"><i class="fas fa-spinner fa-spin"></i></span>
                </button>
                <div class="auth-switch">
                    Don't have an account? <a href="#" id="show-signup">Sign up</a>
                </div>
            </div>
            
            <!-- Signup Form -->
            <div class="auth-form" id="signup-form" style="display: none;">
                <h2><i class="fas fa-user-plus"></i> SIGN UP</h2>
                <div class="auth-error" id="signup-error"></div>
                <div class="form-group">
                    <label for="signup-username"><i class="fas fa-user"></i> Username</label>
                    <input type="text" id="signup-username" placeholder="Choose a username" autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="signup-email"><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" id="signup-email" placeholder="Enter your email" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="signup-password"><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="signup-password" placeholder="Create a password (min 6 characters)" autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label for="signup-confirm"><i class="fas fa-lock"></i> Confirm Password</label>
                    <input type="password" id="signup-confirm" placeholder="Confirm your password" autocomplete="new-password">
                </div>
                <button class="auth-submit-btn" id="signup-submit">
                    <span class="btn-text">CREATE ACCOUNT</span>
                    <span class="btn-loader" style="display: none;"><i class="fas fa-spinner fa-spin"></i></span>
                </button>
                <div class="auth-switch">
                    Already have an account? <a href="#" id="show-login">Log in</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Comments Modal -->
    <div class="comments-modal" id="comments-modal">
        <div class="comments-modal-content">
            <button class="comments-modal-close" id="comments-modal-close">&times;</button>
            
            <!-- Minimal Comments Header -->
            <div class="comments-header-minimal">
                <img id="comments-animal-image" src="" alt="" class="comments-animal-img-hidden" style="display: none;">
                <span class="comments-title" id="comments-animal-name">Comments</span>
                <span class="comments-count-badge" id="comments-count">0</span>
            </div>
            
            <!-- Add Comment Form -->
            <div class="add-comment-form" id="add-comment-form">
                <div class="reply-indicator" id="reply-indicator" style="display: none;">
                    <span class="reply-text">Replying to...</span>
                    <button class="cancel-reply-btn" id="cancel-reply">&times;</button>
                </div>
                <textarea id="comment-input" placeholder="Share your thoughts about this animal..." maxlength="500" autocomplete="off" data-lpignore="true" data-1p-ignore="true" data-form-type="other" name="animal-comment-field"></textarea>
                <div class="comment-form-footer">
                    <div class="comment-options">
                        <label class="anonymous-toggle">
                            <input type="checkbox" id="anonymous-checkbox">
                            <i class="fas fa-mask"></i><span>Anonymous</span>
                        </label>
                    </div>
                    <div class="comment-form-right">
                        <span class="char-count"><span id="char-count">0</span>/500</span>
                        <button class="comment-submit-btn" id="comment-submit">
                            <i class="fas fa-paper-plane"></i> Post
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Comments Login Prompt -->
            <div class="comments-login-prompt" id="comments-login-prompt" style="display: none;">
                <i class="fas fa-lock"></i>
                <span>Log in to leave a comment</span>
                <button class="login-prompt-btn" id="comments-login-btn">LOG IN</button>
            </div>
            
            <!-- Comments List -->
            <div class="comments-list" id="comments-list">
                <!-- Comments will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Profile Modal -->
    <div class="profile-modal" id="profile-modal">
        <div class="profile-modal-content">
            <button class="profile-modal-close" id="profile-modal-close">&times;</button>
            
            <div class="profile-header">
                <div class="profile-avatar-large clickable" id="profile-avatar-large" title="Click to change avatar">
                    <i class="fas fa-user-circle"></i>
                    <div class="avatar-edit-overlay">
                        <i class="fas fa-camera"></i>
                    </div>
                </div>
                <div class="profile-user-info">
                    <h2 class="profile-username" id="profile-username">Username</h2>
                    <p class="profile-login-hint">Login: <span id="profile-login-username">@username</span></p>
                    <div class="profile-level-display">
                        <span class="profile-level-badge" id="profile-level-badge">LEVEL 1</span>
                        <div class="profile-xp-bar">
                            <div class="profile-xp-fill" id="profile-xp-fill" style="width: 0%;"></div>
                        </div>
                        <span class="profile-xp-text" id="profile-xp-text">0 / 100 XP</span>
                    </div>
                </div>
            </div>
            
            <div class="profile-stats-grid">
                <div class="profile-stat-card">
                    <div class="profile-stat-icon bp-coin-large">
                        <span>⚔</span>
                    </div>
                    <div class="profile-stat-value" id="profile-bp-value">0</div>
                    <div class="profile-stat-label">Battle Points</div>
                </div>
                <div class="profile-stat-card">
                    <div class="profile-stat-icon xp-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="profile-stat-value" id="profile-total-xp">0</div>
                    <div class="profile-stat-label">Total XP</div>
                </div>
                <div class="profile-stat-card">
                    <div class="profile-stat-icon level-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="profile-stat-value" id="profile-level-value">1</div>
                    <div class="profile-stat-label">Level</div>
                </div>
            </div>
            
            <div class="profile-section">
                <h3><i class="fas fa-edit"></i> Display Name</h3>
                <p class="profile-section-desc">This is how others see you in comments and chat. Change it anytime!</p>
                <div class="profile-input-group">
                    <input type="text" id="display-name-input" placeholder="Enter display name..." maxlength="30">
                </div>
            </div>
            
            <div class="profile-section">
                <h3><i class="fas fa-at"></i> Username</h3>
                <p class="profile-section-desc">Your login username. You can change it 3 times per week.</p>
                <div class="profile-input-group">
                    <input type="text" id="username-input" placeholder="Enter username..." maxlength="20">
                    <span class="username-changes-remaining" id="username-changes-remaining">3 changes remaining this week</span>
                </div>
            </div>
            
            <div class="profile-footer">
                <div class="profile-footer-info">
                    <span class="profile-member-since">Member since: <span id="profile-member-since">---</span></span>
                </div>
                <div class="profile-actions">
                    <span class="profile-unsaved-indicator" id="profile-unsaved-indicator">
                        <i class="fas fa-exclamation-circle"></i> Unsaved changes
                    </span>
                    <button class="profile-save-btn" id="profile-save-btn" disabled>
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Avatar Picker Popup -->
    <div class="avatar-picker-modal" id="avatar-picker-modal">
        <div class="avatar-picker-content">
            <div class="avatar-picker-header">
                <h3><i class="fas fa-paw"></i> Choose Your Avatar</h3>
                <button class="avatar-picker-close" id="avatar-picker-close">&times;</button>
            </div>
            <div class="avatar-search-container">
                <input type="text" id="avatar-search" placeholder="Search animals..." class="avatar-search-input">
            </div>
            <div class="avatar-grid" id="avatar-grid">
                <!-- Animal avatars will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Tournament Modal - Premium Game UI -->
    <div class="tournament-modal" id="tournament-modal">
        <!-- Setup Screen - Compact wizard that fits viewport -->
        <div class="tournament-setup" id="tournament-setup">
            <div class="t-setup-container">
                <button class="t-close-btn" id="tournament-close"><i class="fas fa-times"></i></button>
                
                <!-- Header Banner -->
                <div class="t-setup-header">
                    <div class="t-crown-icon"><i class="fas fa-crown"></i></div>
                    <div class="t-title-banner"><span>TOURNAMENT</span></div>
                </div>
                
                <!-- Two-Column Wizard -->
                <div class="t-setup-grid">
                    <!-- Left: Bracket Size -->
                    <div class="t-setup-panel">
                        <div class="t-panel-header">
                            <span class="t-step-badge">1</span>
                            <span class="t-panel-title">BRACKET SIZE</span>
                        </div>
                        <div class="t-bracket-grid">
                            <button class="t-bracket-card" data-size="8">
                                <span class="t-bracket-num">8</span>
                                <span class="t-bracket-label">7 battles</span>
                                <span class="t-bracket-tag">Quick</span>
                            </button>
                            <button class="t-bracket-card" data-size="16">
                                <span class="t-bracket-num">16</span>
                                <span class="t-bracket-label">15 battles</span>
                                <span class="t-bracket-tag">Standard</span>
                            </button>
                            <button class="t-bracket-card" data-size="32">
                                <span class="t-bracket-num">32</span>
                                <span class="t-bracket-label">31 battles</span>
                                <span class="t-bracket-tag">Epic</span>
                            </button>
                            <button class="t-bracket-card" data-size="64">
                                <span class="t-bracket-num">64</span>
                                <span class="t-bracket-label">63 battles</span>
                                <span class="t-bracket-tag">Ultimate</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Right: Filter -->
                    <div class="t-setup-panel">
                        <div class="t-panel-header">
                            <span class="t-step-badge">2</span>
                            <span class="t-panel-title">FILTER</span>
                            <span class="t-optional">(Optional)</span>
                        </div>
                        <div class="t-filter-search">
                            <i class="fas fa-search"></i>
                            <input type="text" id="t-filter-search" placeholder="Search categories...">
                        </div>
                        <div class="t-filter-chips" id="t-filter-chips">
                            <button class="t-chip active" data-type="all"><i class="fas fa-globe"></i> All Animals</button>
                            <!-- Dynamically populated -->
                        </div>
                    </div>
                </div>
                
                <!-- Footer: Summary & Start -->
                <div class="t-setup-footer">
                    <div class="t-summary">
                        <div class="t-summary-item">
                            <i class="fas fa-paw"></i>
                            <span id="preview-animal-count">225 animals</span>
                        </div>
                        <div class="t-summary-divider"></div>
                        <div class="t-summary-item">
                            <i class="fas fa-gamepad"></i>
                            <span id="preview-bracket-size">Select bracket size</span>
                        </div>
                    </div>
                    <button class="t-start-btn" id="start-tournament-btn" disabled>
                        <i class="fas fa-play"></i>
                        <span>START TOURNAMENT</span>
                    </button>
                </div>
                
                <div class="t-login-note" id="tournament-login-note">
                    <i class="fas fa-info-circle"></i> Log in to save results & earn XP
                </div>
            </div>
        </div>
        
        <!-- Battle Screen - Stats Page Consistent Layout -->
        <div class="tournament-battle" id="tournament-battle" style="display: none;">
            <!-- Compact Header -->
            <div class="t-battle-header">
                <div class="t-battle-progress">
                    <span class="t-round-name" id="tournament-progress-text">QUARTER-FINALS</span>
                    <div class="t-progress-bar">
                        <div class="t-progress-fill" id="tournament-progress-bar"></div>
                    </div>
                    <span class="t-match-info" id="tournament-match-text">Match 1 of 4</span>
                </div>
                <button class="t-quit-btn" id="tournament-quit"><i class="fas fa-times"></i> QUIT</button>
            </div>
            
            <!-- Battle Arena - Responsive 3 Column -->
            <div class="t-battle-arena">
                <!-- Left Fighter Card - Sketch Layout: Name → Sci Name → Badges → Hero → Bottom -->
                <div class="t-fighter-card left" id="tournament-fighter-1">
                    <!-- Top Section: Identity -->
                    <div class="t-identity-top">
                        <h3 class="t-name" id="t-fighter-1-name">Loading...</h3>
                        <span class="t-scientific" id="t-fighter-1-scientific">Scientific name</span>
                        <div class="t-badges">
                            <span class="rank-badge" id="t-fighter-1-rank">#1</span>
                            <span class="tournament-chip" id="t-fighter-1-battles"><i class="fas fa-gamepad"></i><span>0</span></span>
                            <span class="winrate-badge" id="t-fighter-1-winrate">0%</span>
                        </div>
                    </div>
                    
                    <!-- Hero Image - Large & Central -->
                    <div class="t-hero-image">
                        <img src="" alt="" id="t-fighter-1-img">
                        <div class="t-click-hint"><i class="fas fa-hand-pointer"></i> CLICK TO VOTE</div>
                    </div>
                    
                    <!-- Bottom Section: Physical + Abilities + Traits -->
                    <div class="t-bottom-info">
                        <!-- Physical Stats Row -->
                        <div class="t-physical-stats">
                            <div class="physical-stat" id="t-fighter-1-weight"><i class="fas fa-weight-hanging"></i> --</div>
                            <div class="physical-stat" id="t-fighter-1-speed"><i class="fas fa-tachometer-alt"></i> --</div>
                            <div class="physical-stat" id="t-fighter-1-bite"><i class="fas fa-teeth"></i> --</div>
                        </div>
                        
                        <!-- Abilities & Traits -->
                        <div class="t-tags">
                            <div class="abilities-tags-compact" id="t-fighter-1-abilities"></div>
                            <div class="traits-tags-compact" id="t-fighter-1-traits"></div>
                        </div>
                    </div>
                    
                    <!-- Rating Change (shown after vote) -->
                    <div class="t-rating-change" id="t-rating-change-1">
                        <span class="t-rating-delta">+0</span>
                        <span class="t-rating-calc"><span class="old">1000</span> → <span class="new">1000</span></span>
                    </div>
                </div>
                
                <!-- Center Column - Sketch Layout: Guess → Vote → VS → Stats -->
                <div class="t-battle-center">
                    <!-- Guess the Majority Toggle - TOP -->
                    <div class="t-guess-section" id="t-guess-section">
                        <button class="t-guess-toggle" id="t-guess-toggle">
                            <i class="fas fa-brain"></i>
                            <span>Guess Majority</span>
                            <div class="t-toggle-switch" id="t-toggle-switch"></div>
                        </button>
                        <div class="t-guess-prompt" id="t-guess-prompt" style="display: none;">
                            <span>Who did the crowd pick?</span>
                        </div>
                    </div>
                    
                    <!-- Community Vote Bar -->
                    <div class="t-community-vote">
                        <div class="t-vote-stats">
                            <span class="t-vote-pct" id="t-majority-pct-left">50%</span>
                            <span class="t-vote-total" id="t-majority-total">0 votes</span>
                            <span class="t-vote-pct" id="t-majority-pct-right">50%</span>
                        </div>
                        <div class="t-vote-bar">
                            <div class="t-vote-fill left" id="t-majority-left" style="width: 50%;"></div>
                            <div class="t-vote-fill right" id="t-majority-right" style="width: 50%;"></div>
                        </div>
                    </div>
                    
                    <!-- VS Badge -->
                    <div class="t-vs-badge"><span>VS</span></div>
                    
                    <!-- Stat Bars - Vertical Stack with Mirrored Bars -->
                    <div class="t-stats-grid">
                        <div class="t-stat-compare" data-stat="attack">
                            <span class="t-stat-num left" id="t-fighter-1-attack">0</span>
                            <div class="t-stat-left"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-1-attack-bar"></div></div></div></div>
                            <div class="t-stat-label"><i class="fas fa-fist-raised"></i><span>ATK</span></div>
                            <div class="t-stat-right"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-2-attack-bar"></div></div></div></div>
                            <span class="t-stat-num right" id="t-fighter-2-attack">0</span>
                        </div>
                        <div class="t-stat-compare" data-stat="defense">
                            <span class="t-stat-num left" id="t-fighter-1-defense">0</span>
                            <div class="t-stat-left"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-1-defense-bar"></div></div></div></div>
                            <div class="t-stat-label"><i class="fas fa-shield-alt"></i><span>DEF</span></div>
                            <div class="t-stat-right"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-2-defense-bar"></div></div></div></div>
                            <span class="t-stat-num right" id="t-fighter-2-defense">0</span>
                        </div>
                        <div class="t-stat-compare" data-stat="agility">
                            <span class="t-stat-num left" id="t-fighter-1-agility">0</span>
                            <div class="t-stat-left"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-1-agility-bar"></div></div></div></div>
                            <div class="t-stat-label"><i class="fas fa-wind"></i><span>AGI</span></div>
                            <div class="t-stat-right"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-2-agility-bar"></div></div></div></div>
                            <span class="t-stat-num right" id="t-fighter-2-agility">0</span>
                        </div>
                        <div class="t-stat-compare" data-stat="stamina">
                            <span class="t-stat-num left" id="t-fighter-1-stamina">0</span>
                            <div class="t-stat-left"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-1-stamina-bar"></div></div></div></div>
                            <div class="t-stat-label"><i class="fas fa-heart"></i><span>STA</span></div>
                            <div class="t-stat-right"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-2-stamina-bar"></div></div></div></div>
                            <span class="t-stat-num right" id="t-fighter-2-stamina">0</span>
                        </div>
                        <div class="t-stat-compare" data-stat="intelligence">
                            <span class="t-stat-num left" id="t-fighter-1-intelligence">0</span>
                            <div class="t-stat-left"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-1-intelligence-bar"></div></div></div></div>
                            <div class="t-stat-label"><i class="fas fa-brain"></i><span>INT</span></div>
                            <div class="t-stat-right"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-2-intelligence-bar"></div></div></div></div>
                            <span class="t-stat-num right" id="t-fighter-2-intelligence">0</span>
                        </div>
                        <div class="t-stat-compare" data-stat="special">
                            <span class="t-stat-num left" id="t-fighter-1-special">0</span>
                            <div class="t-stat-left"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-1-special-bar"></div></div></div></div>
                            <div class="t-stat-label"><i class="fas fa-bolt"></i><span>SPL</span></div>
                            <div class="t-stat-right"><div class="stat-bar-wrapper"><div class="stat-bar"><div class="stat-bar-fill" id="t-fighter-2-special-bar"></div></div></div></div>
                            <span class="t-stat-num right" id="t-fighter-2-special">0</span>
                        </div>
                    </div>
                </div>
                
                <!-- Right Fighter Card - Sketch Layout: Name → Sci Name → Badges → Hero → Bottom -->
                <div class="t-fighter-card right" id="tournament-fighter-2">
                    <!-- Top Section: Identity -->
                    <div class="t-identity-top">
                        <h3 class="t-name" id="t-fighter-2-name">Loading...</h3>
                        <span class="t-scientific" id="t-fighter-2-scientific">Scientific name</span>
                        <div class="t-badges">
                            <span class="rank-badge" id="t-fighter-2-rank">#2</span>
                            <span class="tournament-chip" id="t-fighter-2-battles"><i class="fas fa-gamepad"></i><span>0</span></span>
                            <span class="winrate-badge" id="t-fighter-2-winrate">0%</span>
                        </div>
                    </div>
                    
                    <!-- Hero Image - Large & Central -->
                    <div class="t-hero-image">
                        <img src="" alt="" id="t-fighter-2-img">
                        <div class="t-click-hint"><i class="fas fa-hand-pointer"></i> CLICK TO VOTE</div>
                    </div>
                    
                    <!-- Bottom Section: Physical + Abilities + Traits -->
                    <div class="t-bottom-info">
                        <!-- Physical Stats Row -->
                        <div class="t-physical-stats">
                            <div class="physical-stat" id="t-fighter-2-weight"><i class="fas fa-weight-hanging"></i> --</div>
                            <div class="physical-stat" id="t-fighter-2-speed"><i class="fas fa-tachometer-alt"></i> --</div>
                            <div class="physical-stat" id="t-fighter-2-bite"><i class="fas fa-teeth"></i> --</div>
                        </div>
                        
                        <!-- Abilities & Traits -->
                        <div class="t-tags">
                            <div class="abilities-tags-compact" id="t-fighter-2-abilities"></div>
                            <div class="traits-tags-compact" id="t-fighter-2-traits"></div>
                        </div>
                    </div>
                    
                    <!-- Rating Change (shown after vote) -->
                    <div class="t-rating-change" id="t-rating-change-2">
                        <span class="t-rating-delta">+0</span>
                        <span class="t-rating-calc"><span class="old">1000</span> → <span class="new">1000</span></span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Results Screen - Fits Viewport -->
        <div class="tournament-results" id="tournament-results" style="display: none;">
            <div class="t-results-container">
                <!-- Champion Section -->
                <div class="t-champion-section">
                    <div class="t-crown-burst"><i class="fas fa-crown"></i></div>
                    <div class="t-champion-banner"><span>CHAMPION</span></div>
                    <div class="t-champion-card">
                        <img src="" alt="" class="t-champion-img" id="champion-img">
                        <div class="t-champion-name" id="champion-name">Champion</div>
                        <div class="t-champion-stats">
                            <div class="t-champ-stat">
                                <span class="t-champ-val" id="result-matches">0</span>
                                <span class="t-champ-label">Matches Won</span>
                            </div>
                            <div class="t-champ-stat">
                                <span class="t-champ-val" id="result-bracket">0</span>
                                <span class="t-champ-label">Bracket Size</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Stats + Podium Row -->
                <div class="t-results-row">
                    <!-- Tournament Stats -->
                    <div class="t-stats-panel">
                        <div class="t-stats-title">TOURNAMENT STATS</div>
                        <div class="t-stats-grid">
                            <div class="t-stat-item">
                                <span class="t-stat-value" id="stat-total-battles">0</span>
                                <span class="t-stat-label">Battles</span>
                            </div>
                            <div class="t-stat-item">
                                <span class="t-stat-value" id="stat-avg-rating">0</span>
                                <span class="t-stat-label">Avg Rating</span>
                            </div>
                            <div class="t-stat-item">
                                <span class="t-stat-value" id="stat-duration">0s</span>
                                <span class="t-stat-label">Duration</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Podium -->
                    <div class="t-podium-panel">
                        <div class="t-podium-title">RUNNER-UPS</div>
                        <div class="t-podium-grid" id="t-podium-grid">
                            <!-- Dynamically populated -->
                        </div>
                    </div>
                </div>
                
                <!-- XP/Bonus Display -->
                <div class="t-bonus-display" id="t-bonus-display" style="display: none;">
                    <div class="t-bonus-item xp"><i class="fas fa-star"></i> <span id="t-bonus-xp">+0 XP</span></div>
                    <div class="t-bonus-item bp"><i class="fas fa-coins"></i> <span id="t-bonus-bp">+0 BP</span></div>
                    <div class="t-bonus-item guess" id="t-bonus-guess" style="display: none;">
                        <i class="fas fa-brain"></i> <span>+5 XP Guess Bonus!</span>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="t-results-actions">
                    <button class="t-action-btn primary" id="play-again-btn">
                        <i class="fas fa-redo"></i><span>PLAY AGAIN</span>
                    </button>
                    <button class="t-action-btn secondary" id="share-results-btn">
                        <i class="fas fa-share-alt"></i><span>SHARE</span>
                    </button>
                    <button class="t-action-btn tertiary" id="close-results-btn">
                        <i class="fas fa-times"></i><span>CLOSE</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Data loaded from MongoDB API - no local data.js needed -->
    <script src="auth.js"></script>
    <script src="script.js" defer></script>
</body>
</html>
