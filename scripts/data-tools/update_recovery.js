/**
 * Update Recovery Substat for All Animals
 * This script updates the recovery substat values in MongoDB
 */

require('dotenv').config({ path: '.env.local' });
const mongoose = require('mongoose');

const MONGODB_URI = process.env.MONGODB_URI;

const recoveryStats = {
  "African Elephant": 98.9,
  "Bullet Ant": 95.4,
  "Army Ant": 95.0,
  "Giant Squid": 95.0,
  "Hummingbird": 95.0,
  "Dragonfly": 94.0,
  "Cuttlefish": 92.0,
  "Manta Ray": 92.0,
  "Mantis Shrimp": 92.0,
  "Octopus": 91.5,
  "Gibbon": 90.5,
  "Capuchin Monkey": 90.0,
  "Spider Monkey": 89.5,
  "Baboon": 88.5,
  "Mandrill": 88.0,
  "Raccoon": 88.0,
  "African Wild Dog": 87.5,
  "Dhole": 87.5,
  "Dingo": 87.5,
  "Pronghorn": 87.0,
  "Black Panther": 86.7,
  "Gazelle": 86.0,
  "Impala": 86.0,
  "Ibex": 85.0,
  "Mountain Goat": 85.0,
  "Sable Antelope": 85.0,
  "Chameleon": 84.0,
  "Ferret": 84.0,
  "Gecko": 84.0,
  "Meerkat": 84.0,
  "Stoat": 84.0,
  "Coyote": 83.4,
  "Arctic Fox": 80.6,
  "Giant Centipede": 79.2,
  "Anteater": 79.0,
  "Ring-tailed Lemur": 77.0,
  "Proboscis Monkey": 76.1,
  "Jackal": 75.8,
  "Flying Squirrel": 75.7,
  "Praying Mantis": 75.7,
  "Fennec Fox": 75.5,
  "Camel": 73.6,
  "Yak": 73.3,
  "Bighorn Sheep": 73.1,
  "Tarantula Hawk": 71.4,
  "Box Jellyfish": 71.2,
  "Chimpanzee": 69.9,
  "Bactrian Camel": 68.1,
  "Gray Wolf": 67.1,
  "Orangutan": 66.7,
  "Wildebeest": 65.9,
  "Maned Wolf": 65.8,
  "Albatross": 65.6,
  "Howler Monkey": 64.5,
  "Condor": 63.2,
  "Bald Eagle": 63.1,
  "Arctic Wolf": 61.6,
  "Snowy Owl": 60.1,
  "Sloth": 59.1,
  "Armadillo": 59.0,
  "Hedgehog": 58.8,
  "Lionfish": 58.5,
  "Sea Lion": 58.1,
  "Camel Spider": 58.0,
  "Macaw": 58.0,
  "Seal": 57.7,
  "Skunk": 57.4,
  "Poison Dart Frog": 57.2,
  "Kiwi": 57.1,
  "Peacock": 57.0,
  "Anaconda": 56.9,
  "Oryx": 56.2,
  "Porcupine": 56.2,
  "Black Mamba": 56.1,
  "Cockatoo": 56.0,
  "Red Fox": 56.0,
  "Piranha": 55.8,
  "Donkey": 55.6,
  "Leopard": 55.5,
  "Hornet": 55.4,
  "Mongoose": 55.4,
  "Elk": 55.3,
  "Okapi": 55.3,
  "Zebra": 55.3,
  "Red Panda": 55.2,
  "Capybara": 55.0,
  "Opossum": 54.8,
  "Python": 54.6,
  "Beaver": 54.5,
  "Snow Leopard": 54.5,
  "Barn Owl": 54.4,
  "Tasmanian Devil": 54.0,
  "Badger": 53.5,
  "Flamingo": 53.5,
  "Musk Ox": 53.0,
  "Stingray": 52.9,
  "Kookaburra": 52.8,
  "Peregrine Falcon": 52.5,
  "Colossal Squid": 52.2,
  "Moose": 52.1,
  "Raven": 51.9,
  "Sailfish": 51.9,
  "Swordfish": 51.9,
  "Kangaroo": 51.8,
  "Komodo Dragon": 51.7,
  "Wombat": 51.6,
  "Harpy Eagle": 51.5,
  "Golden Eagle": 51.3,
  "Caracal": 51.2,
  "Wild Boar": 51.1,
  "Gila Monster": 51.0,
  "Wallaby": 51.0,
  "Anglerfish": 50.8,
  "Wild Horse": 50.7,
  "Axolotl": 50.5,
  "Great Horned Owl": 50.5,
  "Serval": 50.5,
  "Reindeer": 50.3,
  "Stag Beetle": 50.0,
  "Japanese Macaque": 49.9,
  "King Cobra": 49.5,
  "Bongo": 49.4,
  "Pufferfish": 49.4,
  "Tiger Shark": 48.8,
  "Honey Badger": 48.6,
  "Crow": 48.5,
  "Emperor Penguin": 48.3,
  "Magpie": 48.3,
  "Hyena": 48.1,
  "Otter": 47.5,
  "Sawfish": 47.2,
  "Lynx": 47.0,
  "Clouded Leopard": 46.9,
  "Pelican": 46.9,
  "Monitor Lizard": 46.7,
  "Galapagos Tortoise": 46.6,
  "Gorilla": 46.1,
  "Stork": 46.1,
  "Bullfrog": 46.0,
  "Toucan": 45.9,
  "Warthog": 45.5,
  "Guanaco": 45.2,
  "Emu": 45.0,
  "Alligator": 44.5,
  "Salamander": 44.5,
  "Jaguar": 44.0,
  "Puffin": 44.0,
  "Llama": 43.8,
  "Red-Eyed Tree Frog": 43.4,
  "Black Widow": 43.2,
  "Pangolin": 42.9,
  "Wolverine": 42.5,
  "King Crab": 42.3,
  "Naked Mole Rat": 42.1,
  "Goose": 41.9,
  "Electric Eel": 41.1,
  "Red-tailed Hawk": 41.0,
  "Cassowary": 40.8,
  "Reticulated Python": 40.2,
  "Swan": 40.2,
  "Vulture": 40.2,
  "Cougar": 40.0,
  "Giraffe": 40.0,
  "Deathstalker Scorpion": 39.9,
  "Goliath Birdeater": 39.9,
  "Bull Shark": 39.6,
  "Snapping Turtle": 39.5,
  "Sugar Glider": 39.5,
  "Bottlenose Dolphin": 39.4,
  "Koala": 39.4,
  "Quoll": 39.3,
  "Walrus": 39.2,
  "Alpaca": 39.1,
  "Cheetah": 38.7,
  "Moray Eel": 38.4,
  "Great White Shark": 38.3,
  "Boa Constrictor": 38.2,
  "Lobster": 38.2,
  "Megalodon": 38.2,
  "Sun Bear": 38.0,
  "Bison": 37.4,
  "Ostrich": 37.4,
  "Ocelot": 37.1,
  "Green Anaconda": 37.0,
  "Hellbender": 37.0,
  "Monarch Butterfly": 36.9,
  "Iguana": 36.8,
  "Siberian Tiger": 36.8,
  "Hercules Beetle": 36.3,
  "Sea Otter": 36.0,
  "Rhinoceros": 35.6,
  "Osprey": 35.5,
  "Quokka": 35.1,
  "Kudu": 35.0,
  "Beluga Whale": 34.9,
  "Huntsman Spider": 34.6,
  "Shoebill": 34.2,
  "Hammerhead Shark": 34.0,
  "Nautilus": 34.0,
  "Narwhal": 33.6,
  "Bobcat": 33.5,
  "Coconut Crab": 32.9,
  "Tapir": 32.7,
  "Tuna": 32.7,
  "Secretary Bird": 32.6,
  "Saltwater Crocodile": 32.1,
  "Marlin": 31.9,
  "Barracuda": 31.6,
  "Grizzly Bear": 31.4,
  "Gaboon Viper": 31.2,
  "Manatee": 31.2,
  "African Lion": 31.1,
  "Orca": 30.6,
  "Emperor Scorpion": 30.1,
  "Platypus": 30.0,
  "Cape Buffalo": 28.1,
  "Spectacled Bear": 24.3,
  "Black Rhinoceros": 21.5,
  "Rattlesnake": 21.5,
  "Black Bear": 21.2,
  "Sloth Bear": 20.4,
  "Polar Bear": 18.9,
  "Leatherback Sea Turtle": 17.8,
  "Hippopotamus": 13.1,
  "Blue Whale": 12.5
};

async function updateRecovery() {
  try {
    console.log('Connecting to MongoDB...');
    await mongoose.connect(MONGODB_URI);
    console.log('Connected successfully!\n');

    const Animal = mongoose.model('Animal', new mongoose.Schema({}, { strict: false }), 'animals');

    let updated = 0;
    let notFound = 0;

    for (const [name, recovery] of Object.entries(recoveryStats)) {
      const result = await Animal.updateOne(
        { name: name },
        { $set: { 'substats.recovery': recovery } }
      );

      if (result.matchedCount > 0) {
        console.log(`✓ Updated ${name}: recovery = ${recovery}`);
        updated++;
      } else {
        console.log(`✗ Not found: ${name}`);
        notFound++;
      }
    }

    console.log('\n========== SUMMARY ==========');
    console.log(`Total animals in data: ${Object.keys(recoveryStats).length}`);
    console.log(`Successfully updated: ${updated}`);
    console.log(`Not found: ${notFound}`);

    await mongoose.disconnect();
    console.log('\nDisconnected from MongoDB');

  } catch (error) {
    console.error('Error:', error);
    process.exit(1);
  }
}

updateRecovery();
