/**
 * Update Abilities Substat for All Animals
 * This script updates the abilities substat values in MongoDB
 */

require('dotenv').config({ path: '.env.local' });
const mongoose = require('mongoose');

const MONGODB_URI = process.env.MONGODB_URI;

const abilitiesStats = {
  "Box Jellyfish": 100.0,
  "King Cobra": 98.5,
  "Black Mamba": 97.5,
  "Gaboon Viper": 96.5,
  "Poison Dart Frog": 96.0,
  "Deathstalker Scorpion": 95.5,
  "Pufferfish": 94.5,
  "Electric Eel": 94.0,
  "Mantis Shrimp": 93.5,
  "Komodo Dragon": 93.0,
  "Saltwater Crocodile": 92.5,
  "Rattlesnake": 92.0,
  "Alligator": 91.0,
  "Black Widow": 90.0,
  "Bullet Ant": 90.0,
  "Tarantula Hawk": 90.0,
  "Bullfrog": 88.3,
  "Hornet": 88.0,
  "Red-Eyed Tree Frog": 87.4,
  "Gila Monster": 87.0,
  "Lionfish": 86.0,
  "Stingray": 86.0,
  "Platypus": 85.0,
  "Moray Eel": 84.0,
  "Camel Spider": 83.0,
  "Emperor Scorpion": 83.0,
  "Goliath Birdeater": 82.0,
  "Spider Monkey": 79.7,
  "African Elephant": 73.2,
  "Giant Centipede": 73.1,
  "Giant Squid": 72.4,
  "Dragonfly": 70.9,
  "Huntsman Spider": 70.8,
  "Chameleon": 69.0,
  "Black Panther": 67.1,
  "Praying Mantis": 65.7,
  "Army Ant": 62.2,
  "Sable Antelope": 62.0,
  "Sloth": 58.5,
  "Armadillo": 58.2,
  "Hedgehog": 58.0,
  "Impala": 57.9,
  "Vulture": 57.6,
  "Sea Lion": 56.9,
  "Harpy Eagle": 56.8,
  "Macaw": 56.6,
  "Seal": 56.2,
  "Manta Ray": 56.0,
  "Skunk": 55.6,
  "Walrus": 55.6,
  "Anteater": 55.4,
  "Kiwi": 55.1,
  "Peacock": 55.0,
  "Anaconda": 54.9,
  "Dhole": 54.8,
  "Musk Ox": 54.8,
  "Rhinoceros": 54.7,
  "Fennec Fox": 54.5,
  "Great Horned Owl": 54.5,
  "Grizzly Bear": 54.1,
  "Galapagos Tortoise": 53.9,
  "Oryx": 53.6,
  "Porcupine": 53.6,
  "Cockatoo": 53.2,
  "Piranha": 53.0,
  "Donkey": 52.6,
  "Leopard": 52.4,
  "Mongoose": 52.4,
  "Okapi": 52.2,
  "Red Panda": 52.0,
  "Capybara": 51.6,
  "Octopus": 51.6,
  "Opossum": 51.4,
  "Black Bear": 51.3,
  "Dingo": 51.0,
  "Python": 51.0,
  "Sun Bear": 51.0,
  "Beaver": 50.8,
  "Snow Leopard": 50.8,
  "Tasmanian Devil": 50.0,
  "Flamingo": 49.2,
  "Badger": 49.1,
  "Baboon": 48.9,
  "Blue Whale": 48.9,
  "Kookaburra": 48.0,
  "Colossal Squid": 47.0,
  "Raven": 46.5,
  "Sailfish": 46.5,
  "Swordfish": 46.4,
  "Kangaroo": 46.2,
  "Wombat": 46.0,
  "Caracal": 45.3,
  "Wild Boar": 45.2,
  "Wallaby": 45.0,
  "Anglerfish": 44.6,
  "Axolotl": 44.2,
  "Serval": 44.2,
  "Maned Wolf": 43.7,
  "Stag Beetle": 43.4,
  "Peregrine Falcon": 43.2,
  "Japanese Macaque": 43.1,
  "Mandrill": 42.8,
  "Bongo": 42.4,
  "Jackal": 41.4,
  "Tiger Shark": 41.3,
  "Condor": 41.1,
  "Honey Badger": 41.0,
  "Crow": 40.8,
  "Emperor Penguin": 40.5,
  "Magpie": 40.5,
  "Gazelle": 40.2,
  "Hyena": 40.1,
  "Otter": 39.2,
  "Sawfish": 38.8,
  "Lynx": 38.3,
  "Pelican": 38.2,
  "Clouded Leopard": 38.1,
  "Orangutan": 37.4,
  "Gorilla": 36.8,
  "Stork": 36.8,
  "Toucan": 36.5,
  "Chimpanzee": 35.8,
  "Warthog": 35.8,
  "Guanaco": 35.4,
  "Stoat": 35.4,
  "Emu": 35.0,
  "Salamander": 34.2,
  "Ibex": 34.1,
  "African Wild Dog": 34.0,
  "Jaguar": 33.3,
  "Puffin": 33.2,
  "Llama": 33.0,
  "Meerkat": 32.9,
  "Polar Bear": 32.2,
  "Arctic Fox": 32.1,
  "Gibbon": 32.0,
  "Golden Eagle": 31.4,
  "Pangolin": 31.4,
  "Beluga Whale": 30.8,
  "Wolverine": 30.8,
  "Bald Eagle": 30.6,
  "King Crab": 30.5,
  "Naked Mole Rat": 30.1,
  "Raccoon": 29.9,
  "Goose": 29.8,
  "Bighorn Sheep": 29.2,
  "Barn Owl": 28.9,
  "Albatross": 28.7,
  "Gecko": 28.2,
  "Spectacled Bear": 28.1,
  "Cassowary": 27.9,
  "Elk": 27.8,
  "Swan": 27.1,
  "Reticulated Python": 27.0,
  "Hummingbird": 26.7,
  "Cougar": 26.6,
  "Pronghorn": 26.4,
  "Bull Shark": 26.1,
  "Sugar Glider": 25.9,
  "Bottlenose Dolphin": 25.6,
  "Koala": 25.6,
  "Quoll": 25.4,
  "Alpaca": 25.2,
  "Sloth Bear": 25.2,
  "Cheetah": 24.5,
  "Great White Shark": 23.9,
  "Boa Constrictor": 23.7,
  "Megalodon": 23.7,
  "Lobster": 23.6,
  "Arctic Wolf": 23.0,
  "Black Rhinoceros": 22.9,
  "Mountain Goat": 22.3,
  "Ostrich": 22.2,
  "Capuchin Monkey": 22.0,
  "Ocelot": 21.8,
  "Green Anaconda": 21.7,
  "Hellbender": 21.6,
  "Red-tailed Hawk": 21.6,
  "Monarch Butterfly": 21.5,
  "Iguana": 21.4,
  "Siberian Tiger": 21.4,
  "Leatherback Sea Turtle": 21.3,
  "Cuttlefish": 20.4,
  "Hercules Beetle": 20.4,
  "Sea Otter": 20.0,
  "Bactrian Camel": 19.8,
  "Giraffe": 19.4,
  "Osprey": 19.1,
  "Monitor Lizard": 18.9,
  "Quokka": 18.6,
  "Kudu": 18.4,
  "Coyote": 18.2,
  "Gray Wolf": 17.8,
  "Red Fox": 17.2,
  "Shoebill": 17.0,
  "Nautilus": 16.7,
  "Hammerhead Shark": 16.6,
  "Bobcat": 15.9,
  "Narwhal": 15.9,
  "Coconut Crab": 14.9,
  "Tapir": 14.6,
  "Tuna": 14.5,
  "Hippopotamus": 14.4,
  "Ring-tailed Lemur": 14.3,
  "Secretary Bird": 14.3,
  "Wildebeest": 14.3,
  "Ferret": 14.2,
  "Snapping Turtle": 13.8,
  "Marlin": 13.2,
  "Reindeer": 12.8,
  "Barracuda": 12.6,
  "Snowy Owl": 12.5,
  "Manatee": 11.9,
  "African Lion": 11.8,
  "Flying Squirrel": 11.6,
  "Orca": 11.0,
  "Wild Horse": 10.9,
  "Zebra": 9.4,
  "Proboscis Monkey": 6.5,
  "Yak": 4.6,
  "Moose": 2.7,
  "Cape Buffalo": 2.1,
  "Howler Monkey": 1.6,
  "Camel": 1.3,
  "Bison": 0.1
};

async function updateAbilities() {
  try {
    console.log('Connecting to MongoDB...');
    await mongoose.connect(MONGODB_URI);
    console.log('Connected successfully!\n');

    const Animal = mongoose.model('Animal', new mongoose.Schema({}, { strict: false }), 'animals');

    let updated = 0;
    let notFound = 0;

    for (const [name, abilities] of Object.entries(abilitiesStats)) {
      const result = await Animal.updateOne(
        { name: name },
        { $set: { 'substats.abilities': abilities } }
      );

      if (result.matchedCount > 0) {
        console.log(`✓ Updated ${name}: abilities = ${abilities}`);
        updated++;
      } else {
        console.log(`✗ Not found: ${name}`);
        notFound++;
      }
    }

    console.log('\n========== SUMMARY ==========');
    console.log(`Total animals in data: ${Object.keys(abilitiesStats).length}`);
    console.log(`Successfully updated: ${updated}`);
    console.log(`Not found: ${notFound}`);

    await mongoose.disconnect();
    console.log('\nDisconnected from MongoDB');

  } catch (error) {
    console.error('Error:', error);
    process.exit(1);
  }
}

updateAbilities();
