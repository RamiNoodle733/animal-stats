/**
 * Update Tactics Substat for All Animals
 * This script updates the tactics substat values in MongoDB
 */

require('dotenv').config({ path: '.env.local' });
const mongoose = require('mongoose');

const MONGODB_URI = process.env.MONGODB_URI;

const tacticsStats = {
  "Chimpanzee": 100.0,
  "Bottlenose Dolphin": 99.0,
  "Orca": 98.5,
  "Blue Whale": 98.2,
  "Beluga Whale": 98.0,
  "Orangutan": 98.0,
  "African Elephant": 97.0,
  "Crow": 96.0,
  "Gorilla": 96.0,
  "Raven": 96.0,
  "Hyena": 95.0,
  "Octopus": 94.5,
  "Raccoon": 94.5,
  "Cuttlefish": 94.0,
  "Sea Otter": 93.5,
  "Capuchin Monkey": 93.0,
  "Gibbon": 92.5,
  "Mandrill": 92.0,
  "Baboon": 91.5,
  "Spider Monkey": 90.5,
  "Proboscis Monkey": 90.0,
  "Howler Monkey": 89.5,
  "Japanese Macaque": 89.5,
  "Magpie": 88.6,
  "Maned Wolf": 88.0,
  "African Wild Dog": 87.0,
  "Dingo": 87.0,
  "Gray Wolf": 87.0,
  "Dhole": 86.5,
  "Coyote": 86.0,
  "Red Fox": 85.5,
  "Arctic Fox": 85.0,
  "Fennec Fox": 85.0,
  "Honey Badger": 85.0,
  "Jackal": 85.0,
  "Wolverine": 84.0,
  "Ring-tailed Lemur": 82.2,
  "Narwhal": 80.3,
  "Monitor Lizard": 80.0,
  "Snow Leopard": 80.0,
  "Siberian Tiger": 76.6,
  "Tiger Shark": 76.4,
  "Lionfish": 76.0,
  "Sea Lion": 74.5,
  "Red-tailed Hawk": 69.3,
  "Sun Bear": 69.0,
  "Jaguar": 68.9,
  "Snowy Owl": 67.4,
  "Vulture": 66.0,
  "Arctic Wolf": 65.5,
  "Spectacled Bear": 65.4,
  "Polar Bear": 65.3,
  "African Lion": 65.2,
  "Golden Eagle": 65.2,
  "Otter": 65.2,
  "Leopard": 64.0,
  "Clouded Leopard": 63.6,
  "Harpy Eagle": 59.2,
  "Sloth": 58.8,
  "Armadillo": 58.6,
  "Hedgehog": 58.4,
  "Cougar": 57.4,
  "Macaw": 57.3,
  "Peregrine Falcon": 57.2,
  "Seal": 56.9,
  "Skunk": 56.5,
  "Walrus": 56.5,
  "Poison Dart Frog": 56.3,
  "Kiwi": 56.1,
  "Peacock": 56.0,
  "Anaconda": 55.9,
  "Rhinoceros": 55.8,
  "Sloth Bear": 55.3,
  "Oryx": 54.9,
  "Porcupine": 54.9,
  "Black Mamba": 54.8,
  "Cockatoo": 54.6,
  "Sable Antelope": 54.6,
  "Piranha": 54.4,
  "Barn Owl": 54.3,
  "Donkey": 54.1,
  "Mongoose": 53.9,
  "Hornet": 53.8,
  "Okapi": 53.8,
  "Red Panda": 53.6,
  "Capybara": 53.3,
  "Bullet Ant": 53.1,
  "Mantis Shrimp": 53.1,
  "Opossum": 53.1,
  "Elk": 52.9,
  "Python": 52.8,
  "Beaver": 52.6,
  "Tasmanian Devil": 52.0,
  "Flamingo": 51.4,
  "Badger": 51.3,
  "Bald Eagle": 51.0,
  "Flying Squirrel": 51.0,
  "Stingray": 50.5,
  "Black Panther": 50.4,
  "Kookaburra": 50.4,
  "Colossal Squid": 49.6,
  "Reindeer": 49.6,
  "Sailfish": 49.2,
  "Swordfish": 49.2,
  "Grizzly Bear": 49.1,
  "Kangaroo": 49.0,
  "Komodo Dragon": 48.9,
  "Wombat": 48.8,
  "Caracal": 48.2,
  "Wild Boar": 48.2,
  "Gila Monster": 48.0,
  "Wallaby": 48.0,
  "Anteater": 47.8,
  "Cape Buffalo": 47.8,
  "Anglerfish": 47.7,
  "Axolotl": 47.4,
  "Serval": 47.4,
  "Tarantula Hawk": 47.4,
  "Stag Beetle": 46.7,
  "Galapagos Tortoise": 46.6,
  "Yak": 46.6,
  "King Cobra": 46.0,
  "Bongo": 45.9,
  "Pufferfish": 45.9,
  "Bison": 45.1,
  "Black Bear": 45.0,
  "Great Horned Owl": 45.0,
  "Condor": 44.9,
  "Alligator": 44.5,
  "Emperor Penguin": 44.4,
  "Bactrian Camel": 43.6,
  "Sawfish": 43.0,
  "Camel": 42.8,
  "Lynx": 42.6,
  "Pelican": 42.6,
  "Giant Squid": 42.1,
  "Stork": 41.4,
  "Bullfrog": 41.3,
  "Toucan": 41.2,
  "Impala": 40.7,
  "Warthog": 40.6,
  "Guanaco": 40.3,
  "Stoat": 40.3,
  "Emu": 40.0,
  "Manta Ray": 39.7,
  "Snapping Turtle": 39.5,
  "Salamander": 39.4,
  "Ibex": 39.3,
  "Puffin": 38.6,
  "Llama": 38.4,
  "Meerkat": 38.3,
  "Red-Eyed Tree Frog": 37.8,
  "Black Widow": 37.6,
  "Pangolin": 37.2,
  "King Crab": 36.4,
  "Naked Mole Rat": 36.1,
  "Goose": 35.8,
  "Albatross": 35.0,
  "Electric Eel": 34.8,
  "Gecko": 34.6,
  "Cassowary": 34.4,
  "Army Ant": 33.7,
  "Reticulated Python": 33.6,
  "Swan": 33.6,
  "Hummingbird": 33.3,
  "Deathstalker Scorpion": 33.2,
  "Goliath Birdeater": 33.2,
  "Pronghorn": 33.1,
  "Bull Shark": 32.8,
  "Gazelle": 32.8,
  "Sugar Glider": 32.7,
  "Koala": 32.5,
  "Quoll": 32.4,
  "Alpaca": 32.2,
  "Saltwater Crocodile": 32.1,
  "Cheetah": 31.6,
  "Moray Eel": 31.2,
  "Great White Shark": 31.1,
  "Boa Constrictor": 31.0,
  "Megalodon": 31.0,
  "Lobster": 30.9,
  "Black Rhinoceros": 30.3,
  "Zebra": 30.3,
  "Ostrich": 29.8,
  "Praying Mantis": 29.6,
  "Green Anaconda": 29.4,
  "Ocelot": 29.4,
  "Hellbender": 29.3,
  "Monarch Butterfly": 29.2,
  "Iguana": 29.1,
  "Mountain Goat": 28.8,
  "Hercules Beetle": 28.4,
  "Moose": 27.8,
  "Osprey": 27.3,
  "Giant Centipede": 27.0,
  "Quokka": 26.8,
  "Kudu": 26.7,
  "Box Jellyfish": 26.6,
  "Musk Ox": 26.6,
  "Huntsman Spider": 26.2,
  "Shoebill": 25.6,
  "Nautilus": 25.4,
  "Hammerhead Shark": 25.3,
  "Camel Spider": 24.9,
  "Bobcat": 24.7,
  "Chameleon": 24.5,
  "Coconut Crab": 23.9,
  "Tapir": 23.6,
  "Tuna": 23.6,
  "Hippopotamus": 23.5,
  "Secretary Bird": 23.5,
  "Wildebeest": 23.4,
  "Ferret": 23.3,
  "Giraffe": 22.7,
  "Marlin": 22.5,
  "Barracuda": 22.1,
  "Bighorn Sheep": 21.6,
  "Gaboon Viper": 21.6,
  "Manatee": 21.6,
  "Rattlesnake": 21.5,
  "Wild Horse": 20.7,
  "Dragonfly": 20.4,
  "Emperor Scorpion": 20.1,
  "Platypus": 20.0,
  "Leatherback Sea Turtle": 17.8
};

async function updateTactics() {
  try {
    console.log('Connecting to MongoDB...');
    await mongoose.connect(MONGODB_URI);
    console.log('Connected successfully!\n');

    const Animal = mongoose.model('Animal', new mongoose.Schema({}, { strict: false }), 'animals');

    let updated = 0;
    let notFound = 0;

    for (const [name, tactics] of Object.entries(tacticsStats)) {
      const result = await Animal.updateOne(
        { name: name },
        { $set: { 'substats.tactics': tactics } }
      );

      if (result.matchedCount > 0) {
        console.log(`✓ Updated ${name}: tactics = ${tactics}`);
        updated++;
      } else {
        console.log(`✗ Not found: ${name}`);
        notFound++;
      }
    }

    console.log('\n========== SUMMARY ==========');
    console.log(`Total animals in data: ${Object.keys(tacticsStats).length}`);
    console.log(`Successfully updated: ${updated}`);
    console.log(`Not found: ${notFound}`);

    await mongoose.disconnect();
    console.log('\nDisconnected from MongoDB');

  } catch (error) {
    console.error('Error:', error);
    process.exit(1);
  }
}

updateTactics();
